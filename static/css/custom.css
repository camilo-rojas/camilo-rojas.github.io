/* Custom styles to improve spacing and layout */

/* Specific styling for article page titles only */
article header h1 {
    margin-top: 0.2rem !important;
    margin-bottom: 0.2rem !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    line-height: 1.2 !important;
}

/* Section page titles (like AI for Business) - keep them normal */
main > h1:not(article header h1) {
    margin-top: 1rem !important;
    margin-bottom: 0.25rem !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    line-height: 1.2 !important;
}

/* Reduce space between header and main content */
header {
    margin-bottom: 1rem !important;
}

main {
    padding-top: 0;
    margin-top: -0.5rem;
    min-height: auto !important;
    flex: 1 0 auto;
}

/* Make body a flexbox container for better layout control */
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

body {
    display: flex !important;
    flex-direction: column !important;
    min-height: 100vh !important;
}

/* Ensure footer stays at bottom but doesn't create excessive space */
footer {
    margin-top: auto;
}

/* Improve section page layout */
.container {
    padding-top: 0.25rem;
    padding-bottom: 0.5rem;
}

/* Responsive layout adjustments */
@media (max-height: 800px) {
    /* Reduce margins on shorter screens */
    header {
        margin-bottom: 0.5rem !important;
    }
    
    footer {
        margin-top: 1rem;
        padding: 1rem 0;
    }
}

/* Very compact layout for small screens */
@media (max-height: 600px) {
    header {
        padding: 0.5rem 0;
        margin-bottom: 0.25rem !important;
    }
    
    footer {
        padding: 0.5rem 0;
    }
    
    .container {
        padding-top: 0.1rem;
        padding-bottom: 0.25rem;
    }
}

/* Force very tight spacing between title and content */
main .container h1 + p {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

main .container h1 {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
    line-height: 1.1 !important;
}

/* Try different selectors in case the structure is different */
body main h1:first-child {
    margin-bottom: 0 !important;
}

.container > h1:first-child {
    margin-bottom: 0 !important;
}

/* Better spacing for content sections */
main .content {
    margin-top: 0 !important;
}

/* Override any default paragraph margins after titles */
main p:first-of-type {
    margin-top: 0 !important;
}

/* Reduce spacing in single page article headers (About, individual posts) */
main > .container > article {
    margin-top: 0.25rem !important;
    padding-top: 0 !important;
}

main > .container > article header {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    padding-top: 0 !important;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
}

main > .container > article header .post-meta {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
}

/* Keep normal spacing for post list items */
.post-item {
    margin-bottom: 1rem;
    background-color: var(--ctp-surface0) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    transition: background-color 0.2s ease !important;
}

.post-item:hover {
    background-color: var(--ctp-surface1) !important;
}

.post-item article header {
    margin-bottom: 0.5rem !important;
    padding-left: 0;
    padding-right: 0;
}

/* Ensure post titles are visible */
.post-item .post-title {
    margin-top: 0 !important;
    margin-bottom: 0.5rem !important;
}

.post-item .post-title a {
    color: var(--ctp-text) !important;
    text-decoration: none !important;
}

.post-item .post-title a:hover {
    color: var(--ctp-blue) !important;
}

/* Make sure post meta and summary are visible */
.post-item .post-meta {
    color: var(--ctp-subtext0) !important;
    font-size: 0.9rem !important;
    margin-bottom: 1rem !important;
}

.post-item .post-summary {
    color: var(--ctp-text) !important;
    line-height: 1.6 !important;
}

/* Improve post meta spacing */
.post-meta {
    margin-bottom: 1rem;
    margin-left: 0;
    padding-left: 0;
}

/* Better spacing for section lists */
.post-list {
    margin-top: 1rem;
}

/* Improve vertical rhythm */
p {
    margin-bottom: 1rem;
}

/* Better spacing for home page sections */
.home-section {
    margin-bottom: 2rem;
}

.home-section:last-child {
    margin-bottom: 1rem;
}

/* Clean, targeted heading spacing overrides */
.container h1 {
    margin-top: 1rem !important;
    margin-bottom: 0.1rem !important;
}

.container h2 {
    margin-top: 1.5rem !important;
    margin-bottom: 0.1rem !important;
}

.container h3 {
    margin-top: 1.25rem !important;
    margin-bottom: 0.1rem !important;
}

/* Force H2 and H3 to match H1 tight spacing with highest specificity */
main .container h2,
body main .container h2,
html body main .container h2 {
    margin-bottom: 0.1rem !important;
    padding-bottom: 0 !important;
}

main .container h3,
body main .container h3,
html body main .container h3 {
    margin-bottom: 0.1rem !important;
    padding-bottom: 0 !important;
}

/* Remove top margin from paragraphs that immediately follow H2 and H3, but NOT in post items */
main .container h2 + p:not(.post-item h2 + p),
body main .container h2 + p:not(.post-item h2 + p),
html body main .container h2 + p:not(.post-item h2 + p) {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

main .container h3 + p:not(.post-item h3 + p),
body main .container h3 + p:not(.post-item h3 + p),
html body main .container h3 + p:not(.post-item h3 + p) {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* Ensure post items maintain proper internal spacing */
.post-item h3 {
    margin-top: 0 !important;
    margin-bottom: 0.5rem !important;
}

.post-item .post-summary {
    margin-top: 0 !important;
}

/* Improved tags/terms display */
.terms-list {
    display: inline-block;
    margin-bottom: 0.5rem;
}

.terms-label {
    font-weight: normal;
    margin-right: 0.5rem;
}

.terms-items {
    display: inline;
}

.terms-items a {
    text-decoration: none;
    opacity: 0.8;
}

.terms-items a:hover {
    opacity: 1;
    text-decoration: underline;
}

/* Global heading line-height improvements */
h1, h2, h3, h4, h5, h6 {
    line-height: 1.3 !important;
}

/* Mobile-specific improvements */
@media (max-width: 768px) {
    h1, h2, h3, h4, h5, h6 {
        line-height: 1.25 !important;
    }
    
    article header {
        padding-left: 1rem;
        padding-right: 1rem;
    }
    
    article header h1 {
        margin-top: 0.2rem !important;
        margin-bottom: 0.2rem !important;
        line-height: 1.2 !important;
    }
    
    /* Mobile image optimization */
    .content img {
        max-width: 100% !important;
        height: auto !important;
        width: auto !important;
        display: block;
        margin: 1rem auto;
    }
    
    /* Ensure images don't overflow on mobile */
    article .content {
        overflow-x: hidden;
    }
    
    /* Fix for any embedded content */
    .content iframe,
    .content video,
    .content embed,
    .content object {
        max-width: 100% !important;
        height: auto !important;
    }
}